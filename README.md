# secundnyi-soxranyator

Soxranyaet secundy

Написать web java приложение со следующими функциями:

- при запуске приложение начинает раз в секунду писать текущее время в базу;
- в приложении есть web endpoint, который выдает содержимое базы в ответ клиенту (это может быть HTML формат или JSON).

Требуется обеспечить возможность корректной работы приложения при
временной недоступности сервера базы данных. Приложение должно
выводить в лог или на экран информацию о том, что соединения нет и
предпринимать попытку установить соединение заново. После
восстановления соединения записать все данные, которые не попали в БД,
при временной недоступности связи. Интервал восстановления
соединения – 5 секунд.

Все данные должны записываться в ДБ строго в хронологическом порядке:
при выводе данных (время) на экран должен быть в Ascending Order без
применения сортировки (включая индексы в базе данных).

Нужно также учесть и соответственно «ответить» на вопрос (посредством
кода): что будет происходить, если соединение с БД медленное или БД
настолько загружена, что запись в нее будет забирать достаточно много
времени.

Необходимо написать тесты, которые будут покрывать все аспекты
задания. Плюсом будет наличие теста, проверяющего сценарий потери
связи с базой данных в процессе работы, с проверкой восстановления
соединения и корректности порядка записанных в базу данных значений.

База данных на выбор одна из: MySQL, PostgreSQL, MongoDB.

Способ хранения данных в базе: на усмотрение автора.

## Пару слов от меня.

Видимо надо минимум раз в год с нуля поднимать какой-нибудь сервис. Депенденси забываются, билд планы и их настройка тем
более.

Запись данных происходит независимо от БД. Отдельно в очередь. Для такого обьекта это очереди хватит сполна.
По данным ИИ очереди хватит на 104 дня.

**_При памяти 256 МБ и размере объекта Time примерно 22 байта, можно ожидать, что в ConcurrentLinkedQueue поместится
около 8-10 миллионов объектов,
учитывая оверхед JVM и коллекции, а также фрагментацию памяти.
Эта оценка является грубой и может варьироваться в зависимости от конкретной реализации и условий выполнения 
программы_**

Если обьект сложнее, тут можно прикручивать кафку. Это избавит нас от самописного листнера и надобности кидать ивенты.
Да и как еще один инструмент для сохранности данных - очень хороший вариант.

Для джобы взял обычный крон. Но если генерация данных сложная и долгая, то лучше использовать кварц. Этот парень мощнее.

Думал справлюсь быстрее, однако ИИ повел меня в тупик, посоветовал TOXIPROXY для тестирования сетевых проблем.
Не получилось настроить, видимо не зря его забросили и пометили депрекейтед (либо я плуг).
По итогу пришел к банальному костылю - тушить сеть докера.
